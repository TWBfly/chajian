# 📊 表格数据下载器 Chrome 扩展

一个 Chrome 浏览器插件，用于等待网页表格数据加载完成后，下载并保存为 Markdown 格式文件。

## 功能特点

- ✅ **自动等待加载**：智能检测表格数据是否加载完成
- ✅ **支持自定义选择器**：可以指定特定的表格进行下载
- ✅ **多表格支持**：一次性检测并下载页面上的多个表格
- ✅ **Markdown 格式**：导出为标准 Markdown 表格格式
- ✅ **美观界面**：现代化的弹出窗口设计

## 安装方法

### 方法一：开发者模式安装

1. 打开 Chrome 浏览器，进入 `chrome://extensions/`
2. 开启右上角的「开发者模式」
3. 点击「加载已解压的扩展程序」
4. 选择本插件的文件夹 (`chajian`)
5. 安装完成后，工具栏会出现插件图标

### 方法二：Edge 浏览器

1. 打开 Edge 浏览器，进入 `edge://extensions/`
2. 开启左侧的「开发人员模式」
3. 点击「加载解压缩的扩展」
4. 选择本插件的文件夹

## 使用方法

1. **打开目标网页**：访问包含表格的网页（如财务报表页面）
2. **等待页面加载**：确保页面主体内容已加载
3. **点击插件图标**：在浏览器工具栏点击插件图标
4. **检测表格**：点击「🔍 检测表格」按钮，查看页面上的表格
5. **设置文件名**：输入保存的文件名（可选设置 CSS 选择器）
6. **下载**：点击「⬇️ 下载为 Markdown」按钮

## 针对财务数据表格

根据截图中的财务报表页面（如股票财务数据），可以在「表格选择器」中输入：

```
.zyzb_table
```

这将精确选择财务主要指标表格。

## 输出示例

```markdown
# 表格数据导出

> 导出时间: 2026/2/7 17:20:00

> 来源: https://example.com/stock/finance

---

## 表格 1

| 每股指标 | 25-09-30 | 25-06-30 | 25-03-31 | 24-12-31 |
| --- | --- | --- | --- | --- |
| 基本每股收益(元) | 51.5330 | 36.1800 | 21.3800 | 68.6400 |
| 每股净资产(元) | 205.2831 | 189.9753 | 205.0665 | 185.5647 |
```

## 文件结构

```
chajian/
├── manifest.json    # 扩展配置文件
├── popup.html       # 弹出窗口界面
├── popup.js         # 弹出窗口逻辑
├── content.js       # 内容脚本
├── icon16.png       # 16x16 图标
├── icon48.png       # 48x48 图标
├── icon128.png      # 128x128 图标
└── README.md        # 说明文档
```

## 注意事项

1. 插件会自动等待表格数据稳定后再提取（最长等待 10 秒）
2. 如果表格加载较慢，可以多点几次「检测表格」按钮
3. 支持同时下载多个表格，内容会合并到一个 Markdown 文件中
4. 中文和特殊字符会被正确处理

## 技术说明

- 使用 Chrome Manifest V3 规范
- 使用 `chrome.scripting.executeScript` API 在页面中执行脚本
- 通过 `MutationObserver` 监听表格变化
- 智能检测表格数据是否加载完成（连续 3 次检查内容稳定）
